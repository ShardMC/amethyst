plugins {
    id 'java'
}

version = '1.0.0'
group = 'io.shardmc'

configurations {
    shade
    compile.extendsFrom shade
}

repositories {
    mavenCentral()

    flatDir {
        dirs 'libs'
    }
}

dependencies {
    shade 'commons-io:commons-io:2.11.0'
    implementation 'commons-io:commons-io:2.11.0'

    shade 'org.ow2.asm:asm-util:9.4'
    implementation 'org.ow2.asm:asm-util:9.4'

    shade files('libs/core-1.0.0.jar')
    implementation files('libs/core-1.0.0.jar')

    annotationProcessor files('libs/processor-1.0.0.jar')
}

jar {
    manifest {
        attributes(
                'Main-Class': 'io.shardmc.amethyst.Amethyst'
        )
    }

    configurations.shade.each { dep ->
        duplicatesStrategy = DuplicatesStrategy.WARN
        from(project.zipTree(dep)) {
            exclude 'META-INF/MANIFEST.MF', 'module-info.class'
        }
    }
}